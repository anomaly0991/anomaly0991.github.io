<!DOCTYPE HTML>
<html lang="en-US">
  <head>
    <title>Pitch it - HTML5 landing page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	  <link rel="stylesheet" href="css/bootstrap.css" />
	  <link rel="stylesheet" href="css/font-awesome.min.css" />
    <link rel="stylesheet" href="css/linea-icon.css" />
    <link rel="stylesheet" href="css/fancy-buttons.css" />

  	<!--=== Google Fonts ===-->
  	<link href='https://fonts.googleapis.com/css?family=Bangers' rel='stylesheet' type='text/css'>
  	<link href='https://fonts.googleapis.com/css?family=Roboto+Slab:300,700,400' rel='stylesheet' type='text/css'>
  	<link href='https://fonts.googleapis.com/css?family=Raleway:600,400,300' rel='stylesheet' type='text/css'>
  	<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700' rel='stylesheet' type='text/css'>
  	<!--=== Other CSS files ===-->
  	<link rel="stylesheet" href="css/animate.css" />
  	<link rel="stylesheet" href="css/jquery.vegas.css" />
  	<link rel="stylesheet" href="css/baraja.css" />
  	<link rel="stylesheet" href="css/jquery.bxslider.css" />

  	<!--=== Main Stylesheets ===-->
  	<link rel="stylesheet" href="css/style.css" />
  	<link rel="stylesheet" href="css/responsive.css" />

  	<!--=== Color Scheme, three colors are available red.css, orange.css and gray.css ===-->
  	<link rel="stylesheet" id="scheme-source" href="css/schemes/gray.css" />

  	<!--=== Internet explorer fix ===-->
  	<!-- [if lt IE 9]>
  		<script src="http://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  		<script src="http://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  	<![endif] -->
  </head>
<body>

  <!--=== Preloader section starts ===-->
  <section id="preloader">
    <div class="loading-circle fa-spin"></div>
  </section>
  <!--=== Preloader section Ends ===-->

  <!--=== Header section Starts ===-->
    <div id="header" class="header-section">
    <!-- sticky-bar Starts-->
      <div class="sticky-bar-wrap">
        <div class="sticky-section">
          <div id="topbar-hold" class="nav-hold container">
            <nav class="navbar" role="navigation">
              <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!--=== Site Name ===-->
                <a class="site-name navbar-brand" href="#"><span>E</span>gret</a>
              </div>

              <!-- Main Navigation menu Starts -->
              <div class="collapse navbar-collapse navbar-responsive-collapse">
                <ul class="nav navbar-nav navbar-right">
                  <li class="current"><a href="/Users/Amber/Desktop/MyThinkLaunch/pitch/bootstrap/egret/index.html">Home</a></li>
                  <li><a href="/Users/Amber/Desktop/MyThinkLaunch/pitch/bootstrap/egret/profiles.html">Network</a></li>
                  <li><a href="/Users/Amber/Desktop/MyThinkLaunch/pitch/bootstrap/egret/pitchtable.html">Pitch</a></li>
                  <li><a href="#section-feature">Stream</a></li>
                  <li><a href="#section-screenshots">Search</a></li>
                  <li>
                    <div class="flexsearch">
                      <div class="flexsearch--wrapper">
                        <form class="flexsearch--form" action="#" method="post">
                          <div class="flexsearch--input-wrapper">
                            <input class="flexsearch--input" type="search" placeholder="search">
                          </div>
                          <input class="flexsearch--submit" type="submit" value="&#10140;" />
                        </form>
                      </div>
                    </div>
                  </li>
                </ul>


              </div>
              <!-- Main Navigation menu ends-->
            </nav>
          </div>
        </div>
      </div>
    </div>

    <!-- sticky-bar Ends-->
    <!--=== Header section Ends ===-->

		<section id="step-1" class="section-step step-wrap">
			<div class="container step animated" data-animation="bounceInLeft" data-animation-delay="700">
				<div class="row">
					<!-- Step Description Starts -->
					<div class="col-md-8 step-desc">
						<div class="col-md-2 center">
						</div>
						<div class="col-md-10 step-details">
            </div>
          </div>

          <div class="pagehead">

            <br>
          </div>

      <div class="">





        <div class="pitchContainer">
          <ul class="pitches list-group">

          </ul>


          </div>




        </div>




      </div>


		</section>


	   <div class="">
		<!-- <script type="text/javascript">
			const base = require('airtable').base('appkazMUS3HDgFRUx');



		</script> -->


	   </div>



    <!--=== Footer section Starts ===-->
  	<div id="section-footer" class="footer-wrap">
  		<div class="container footer center">
  			<div class="row">
  				<div class="col-lg-12">
  					<h4 class="footer-title"><!-- Footer Title -->
  						<a class="site-name" href="#"><span>E</span>gret</a>
  					</h4>

  					<!-- Social Links -->
  					<div class="social-icons">
  						<ul>
  							<li><a href="#"><i class="fa fa-facebook-square"></i></a></li>
  							<li><a href="#"><i class="fa fa-twitter-square"></i></a></li>
  							<li><a href="#"><i class="fa fa-google-plus-square"></i></a></li>
  							<li><a href="#"><i class="fa fa-pinterest-square"></i></a></li>
  							<li><a href="#"><i class="fa fa-flickr"></i></a></li>
  							<li><a href="#"><i class="fa fa-linkedin-square"></i></a></li>
  						</ul>
  					</div>

  					<p class="copyright">All rights reserved &copy; 2015</p>
  				</div>
  			</div>
  		</div>
  	</div>
  	<!--=== Footer section Ends ===-->

  <!--==== Js files ====-->
  <!--==== Essential files ====-->
  <script type="text/javascript" src="js/jquery-1.11.1.min.js"></script>
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <script type="text/javascript" src="js/bootstrapValidator.min.js"></script>
  <script type="text/javascript" src="js/modernizr.js"></script>
  <script type="text/javascript" src="js/jquery.easing.1.3.js"></script>

  <!--==== Slider and Card style plugin ====-->
  <script type="text/javascript" src="js/jquery.baraja.js"></script>
  <script type="text/javascript" src="js/jquery.vegas.min.js"></script>
  <script type="text/javascript" src="js/jquery.bxslider.min.js"></script>

  <!--==== MailChimp Widget plugin ====-->
  <script type="text/javascript" src="js/jquery.ajaxchimp.min.js"></script>

  <!--==== Scroll and navigation plugins ====-->
  <script type="text/javascript" src="js/jquery.nicescroll.min.js"></script>
  <script type="text/javascript" src="js/jquery.nav.js"></script>
  <script type="text/javascript" src="js/jquery.appear.js"></script>
  <script type="text/javascript" src="js/jquery.fitvids.js"></script>

  <!--==== Custom Script files ====-->
  <script type="text/javascript" src="js/custom.js"></script>
  <script type="text/javascript">

  // Step ONE: Query the HTML Document for the container element(s) you're going to fill up:

  const pitchContainer = document.querySelector('.pitchContainer');

  // Step TWO: Setup your URL variables that takes the link you're trying to go to + the parameters + the api key

  const base_url = 'https://api.airtable.com/v0/appkazMUS3HDgFRUx/'

  // Make a variable for all your DB tables, and add the key for ease
  const pitchTable = 'Pitch?api_key=keykq5utBcEomH4eD'
  const creativeTable = 'Creatives?api_key=keykq5utBcEomH4eD'
  let pitchData;
  // Make variables for the parameters you want to use, if you want to keep track of them or access them easier

  var pitchId = window.location.search.split("=")[1];
  let params = '&maxRecords=9&view=Grid%20view'



  // Make the API Call with FETCH! Make sure you "ADD" all the url pieces you need
  var getData = fetch(base_url+pitchTable)
    .then(data => data.json())
    .then(data => {

      console.log(data);
      pitchData = data.records.find((pitch) => {
        return pitch.id == pitchId
      });
      console.log(pitchData);

      pitchContainer.innerHTML=
      `
      <img src="${pitchData.fields.Attachments["0"].url}"/>
      <h3>${pitchData.fields["Project name"]}</h3>
      <h5><span class="label label-default">${pitchData.fields.Genre}</span></h5>
      <p>${pitchData.fields["Film Type"]["0"]}</p>
      <p>${pitchData.fields["Log Line"]}</p>
      <p>${pitchData.fields.Positions}</p>
      <br>
      <h5>Message from the Creator</h5>
      <p>Hey Guys, I'm really excited to start production on this project.
      My inspiration for this film actually came from my experience growing
      up in the African-American community in the 90s and feeling the need to relax my hair texture.
      Soliel is titled after the main character of the story who's followed around by a literal dark cloud; her hair.
      It's a metaphorical interpretation of a young girl decision to changer herself in order to blend in and remain
      safe, or to accept herself the way she is and face the adversity that comes along with that decision. </P>
      <a href="pitchpage.html" fancy-button> Request to Join Project</a>
      `
    })

      //pitchData = data;
      // this is where you do things to your data!

    //  pitches.innerHTML = pitchData.records.map((pitch)=>{
      //  if (pitch.fields.Attachments[0].url) {

        //  return(
//es6 code
      /**      `<li class='list-grouped-item panel panel-default col-sm-3 pitchsize'>
            <li id=${pitch.id}>${pitch.name}</li>
            <img src='${pitch.fields.Attachments[0].url}'class="pitchImage"/>
            <h3 class='pitchContent'>${pitch.fields["Project name"]}</h2>
            <h6 class='pitchContent'>${pitch.fields.Creator}</h6>
            <h5 class='pitchContent '><span class="label label-default">${pitch.fields.Genre}</span></h5>
            <div class="pitchInfo">
              <p class='pitchContent'>${pitch.fields["Log Line"]}</p>
              <p class='pitchContent'><b>Open Positions:</b><br>${pitch.fields.Positions}</p>
              </div>
              <a href="#" class="fancy-button button-line btn-col small vertical">

             More info..
              <span class="icon">
                <i class="fa fa-leaf"></i>
              </span>
            </a>
            </li>`

          )

        }


      }).join('')
      });


      // Let's list what we need:

        //Pitch Image URL
          // pitchData.records[0].fields.Attachments[0].url

      // here, we are putting the below HTML inside the pitchContainer element
      // pitchContainer.innerHTML = data.records.map((record) =>{
      //   // for each record in 'data.records', return the items in a certain format
      //
      //   return (
      //     ``
      //   )
      // }).join('') //this line is joining all record strings together!


  /** const records = document.querySelector('.records')
  records.innerHTML= data.records.fields.map((records)=>{
    return(<li class='list-group-item'>/**{Creator.name}**/

  </script>
  </body>
</html>
